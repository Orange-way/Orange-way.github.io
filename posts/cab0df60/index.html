<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="喜欢晴天，喜欢雨天">
    
      <link rel="icon" href="/img/favicon.ico">
    
    <meta name="keyword"  content="">
    <link rel="stylesheet" href="/css/style.css">
</head>

<body>

  <div class="page">
    <div class="head">
      <header class="head-header">
  <h1 class="head-authorH">
    <a href="/" class="head-authorLink">
      橙子</a>
  </h1>
  <div class="head-right">
    <!-- <div class="head-search">
      <input class="head-searchK"></input>
      <span class="head-searchT">
        </span>
    </div> -->
    <button class="barWrap" id="barWrap-toggle">
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
    </button>
    <div class="head-about" id="head-about">
      
      <a class="head-aboutLink" href="/about">
        About</a>
      
    </div>
  </div>
</header>
    </div>
    <div class="main">
        <div class="barShow-head" id="barShow">
  <ul class="barShow-ul">
    
      <li class="barShow-item">
        <a href="/archives"><span>
            Archives</span></a>
      </li>
    
      <li class="barShow-item">
        <a href="/categories/life"><span>
            Lifes</span></a>
      </li>
    
      <li class="barShow-item">
        <a href="/tags"><span>
            Tags</span></a>
      </li>
    
    
      <li class="barShow-item">
        <a class="head-aboutLink" href="/about">
          About
        </a>
      </li>
    
  </ul>
</div>
      <article class="post" id="post">
  <header class="post-head">
    <h1 class="post-title">
      <a class="title" href="/posts/cab0df60/">
        react 中使用axios
      </a>
    </h1>
  </header>
  <div class="post-datetag">
    <div class="post-date">
      <time class="post-time" title="2019-02-20 13:31:34" datetime="2019-02-20T05:31:34.000Z" itemprop="datePublished">
  2019-02-20</time>
    </div>
    <div class="post-tag">
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/">react</a></li></ul>

    </div>
  </div>
  <div class="article-entry" itemprop="articleBody">
    
    <p>&#x8FD9;&#x91CC;&#x603B;&#x7ED3; react &#x4E2D; axios &#x8BF7;&#x6C42;&#x6570;&#x636E;&#x3001;&#x62E6;&#x622A;&#x5668;<a id="more"></a></p>
<h4 id="1-&#x9996;&#x5148;&#x5B89;&#x88C5;axios"><a href="#1-&#x9996;&#x5148;&#x5B89;&#x88C5;axios" class="headerlink" title="1 &#x9996;&#x5148;&#x5B89;&#x88C5;axios"></a>1 &#x9996;&#x5148;&#x5B89;&#x88C5;axios</h4><p>npm install axios &#x2013;save</p>
<p>&#x200B;                        </p>
<h4 id="2-&#x5F15;&#x5165;axios"><a href="#2-&#x5F15;&#x5165;axios" class="headerlink" title="2 &#x5F15;&#x5165;axios"></a>2 &#x5F15;&#x5165;axios</h4><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&apos;axios&apos;</span>;</span><br></pre></td></tr></tbody></table></figure>
<p>&#x200B;                        </p>
<h4 id="3-&#x901A;&#x8FC7;-axios-&#x83B7;&#x53D6;&#x6570;&#x636E;"><a href="#3-&#x901A;&#x8FC7;-axios-&#x83B7;&#x53D6;&#x6570;&#x636E;" class="headerlink" title="3 &#x901A;&#x8FC7; axios &#x83B7;&#x53D6;&#x6570;&#x636E;"></a>3 &#x901A;&#x8FC7; axios &#x83B7;&#x53D6;&#x6570;&#x636E;</h4><p>todoList.js</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoList</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>{</span><br><span class="line">  componentDidMount () {</span><br><span class="line">    axios.get(<span class="string">&apos;/list.json&apos;</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> {</span><br><span class="line">      <span class="keyword">this</span>.props.getInitList(res);</span><br><span class="line">    })</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  render () {</span><br><span class="line">    <span class="keyword">const</span> { inpVal, list } = <span class="keyword">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        todoList</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  }</span></span><br><span class="line"><span class="regexp">}</span></span><br></pre></td></tr></tbody></table></figure>
<p>&#x200B;                            </p>
<h4 id="4-&#x62E6;&#x622A;&#x5668;"><a href="#4-&#x62E6;&#x622A;&#x5668;" class="headerlink" title="4 &#x62E6;&#x622A;&#x5668;"></a>4 &#x62E6;&#x622A;&#x5668;</h4><p>&#x62E6;&#x622A;&#x5668;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x7BB1;&#x5B50;&#xFF0C;&#x628A; axios &#x8FD4;&#x56DE;&#x56DE;&#x6765;&#x7684;&#x4E1C;&#x897F;&#x653E;&#x8FDB;&#x53BB;&#xFF0C;&#x7136;&#x540E;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x7ECF;&#x8FC7;&#x5904;&#x7406;&#x7684;&#x4E1C;&#x897F;</p>
<p>todoList.js &#xFF1A;</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, { Component } <span class="keyword">from</span> <span class="string">&apos;react&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> { connect } <span class="keyword">from</span> <span class="string">&apos;react-redux&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> actions <span class="keyword">from</span> <span class="string">&apos;../store/actions/todoList&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&apos;axios&apos;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x5904;&#x7406;&#x8FD4;&#x56DE;&#x7684;&#x4E1C;&#x897F;</span></span><br><span class="line">axios.interceptors.response.use(<span class="function"><span class="params">res</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">if</span>(res.data.code === <span class="number">0</span>) {</span><br><span class="line">    <span class="keyword">return</span> res.data.data;</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="string">&apos;&#x8BF7;&#x6C42;&#x51FA;&#x9519;&apos;</span>);</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoList</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>{</span><br><span class="line">  componentDidMount () {</span><br><span class="line">    axios.get(<span class="string">&apos;/list.json&apos;</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> {</span><br><span class="line">      <span class="keyword">this</span>.props.getInitList(res);</span><br><span class="line">    })</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  render () {</span><br><span class="line">    <span class="keyword">const</span> { inpVal, list } = <span class="keyword">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        todoList</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  }</span></span><br><span class="line"><span class="regexp">}</span></span><br></pre></td></tr></tbody></table></figure>
<p>&#x5F53;&#x6BCF;&#x6B21;&#x8BF7;&#x6C42;&#x90FD;&#x4F1A;&#x8BBE;&#x7F6E;token&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x7EDF;&#x4E00;&#x8BBE;&#x7F6E;token&#xFF1A;</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">axios.interceptors.request.use(<span class="function"><span class="params">config</span> =&gt;</span> {</span><br><span class="line">  config.headers.token = <span class="string">&apos;slkjkdflksdflksdjflksdhfl&apos;</span>;</span><br><span class="line">  <span class="keyword">return</span> config;</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
    
  </div>
</article>

    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-首先安装axios"><span class="post-toc-number">1.</span> <span class="post-toc-text">1 首先安装axios</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-引入axios"><span class="post-toc-number">2.</span> <span class="post-toc-text">2 引入axios</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-通过-axios-获取数据"><span class="post-toc-number">3.</span> <span class="post-toc-text">3 通过 axios 获取数据</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-拦截器"><span class="post-toc-number">4.</span> <span class="post-toc-text">4 拦截器</span></a></li></ol>
        </nav>
    </aside>
   
    </div>
    <footer class="footer-nav">
      
  <span class="footer-msg">
    2018
    
    
    <span class="timeDivide">-</span>
    
    Orange~.&nbsp;
    Power by
    <a href="https://hexo.io/" target="_blank" rel="external nofollow">Hexo</a>
    and
    <a class="orangelink" href="https://github.com/" target="_blank" rel="">
      orange</a>
  </span>

    </footer>
    <div class="back-top" id="back-top">
      <i class="back-top-icon"></i>
    </div>
    
  
  <script src="/js/jquery/jquery-3.1.1.min.js"></script>

    <script src="/js/theme.js"></script>
    <script src="/js/index.js"></script>
  
  </div>
</body>