<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="喜欢晴天，喜欢雨天">
    
      <link rel="icon" href="/img/favicon.ico">
    
    <meta name="keyword"  content="">
    <link rel="stylesheet" href="/css/style.css">
</head>

<body>

  <div class="page">
    <div class="head">
      <header class="head-header">
  <h1 class="head-authorH">
    <a href="/" class="head-authorLink">
      橙子</a>
  </h1>
  <div class="head-right">
    <!-- <div class="head-search">
      <input class="head-searchK"></input>
      <span class="head-searchT">
        </span>
    </div> -->
    <button class="barWrap" id="barWrap-toggle">
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
    </button>
    <div class="head-about" id="head-about">
      
      <a class="head-aboutLink" href="/about">
        About</a>
      
    </div>
  </div>
</header>
    </div>
    <div class="main">
        <div class="barShow-head" id="barShow">
  <ul class="barShow-ul">
    
      <li class="barShow-item">
        <a href="/archives"><span>
            Archives</span></a>
      </li>
    
      <li class="barShow-item">
        <a href="/categories/life"><span>
            Lifes</span></a>
      </li>
    
      <li class="barShow-item">
        <a href="/tags"><span>
            Tags</span></a>
      </li>
    
    
      <li class="barShow-item">
        <a class="head-aboutLink" href="/about">
          About
        </a>
      </li>
    
  </ul>
</div>
      <article class="post" id="post">
  <header class="post-head">
    <h1 class="post-title">
      <a class="title" href="/posts/adc7e95b/">
        react-redux 总结
      </a>
    </h1>
  </header>
  <div class="post-datetag">
    <div class="post-date">
      <time class="post-time" title="2019-02-24 11:21:23" datetime="2019-02-24T03:21:23.000Z" itemprop="datePublished">
  2019-02-24</time>
    </div>
    <div class="post-tag">
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/">react</a></li></ul>

    </div>
  </div>
  <div class="article-entry" itemprop="articleBody">
    
    <p>&#x5728; react &#x4E2D; &#x5F15;&#x5165; redux &#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x72B6;&#x6001;&#x7BA1;&#x7406;&#xFF0C; &#x4F46;&#x6709;&#x4E9B;&#x5730;&#x65B9;&#x6709;&#x70B9;&#x5197;&#x4F59;&#xFF0C;&#x6240;&#x4EE5; react &#x80AF;&#x5B9A;&#x662F;&#x4F1A;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x6B21;&#x603B;&#x7ED3; react-redux &#xFF0C;&#x8FD9;&#x4E2A;&#x5E93;&#x662F;&#x7528;&#x6765;&#x8FDE;&#x63A5; react &#x548C; redux &#x7684; <a id="more"></a></p>
<p>&#x5177;&#x4F53;&#x4F7F;&#x7528;&#x6B65;&#x9AA4;&#x5982;&#x4E0B;&#xFF1A;</p>
<h4 id="1-&#x5B89;&#x88C5;-react-redux"><a href="#1-&#x5B89;&#x88C5;-react-redux" class="headerlink" title="1 &#x5B89;&#x88C5; react-redux"></a>1 &#x5B89;&#x88C5; react-redux</h4><p>npm install react-redux &#x2013;save</p>
<p>&#x200B;                        </p>
<h4 id="2-&#x5F15;&#x5165;-react-redux"><a href="#2-&#x5F15;&#x5165;-react-redux" class="headerlink" title="2 &#x5F15;&#x5165; react-redux"></a>2 &#x5F15;&#x5165; react-redux</h4><p>index.js :</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&apos;react&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> { render } <span class="keyword">from</span> <span class="string">&apos;react-dom&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> { Provider } <span class="keyword">from</span> <span class="string">&apos;react-redux&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&apos;./store&apos;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">&apos;./components/TodoList&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> Counter <span class="keyword">from</span> <span class="string">&apos;./components/Counter&apos;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">render(</span><br><span class="line">  &lt;Provider store={store}&gt;</span><br><span class="line">    &lt;Counter /&gt;</span><br><span class="line">    &lt;TodoList /&gt;</span><br><span class="line">  &lt;<span class="regexp">/Provider&gt;, </span></span><br><span class="line"><span class="regexp">  window.root</span></span><br><span class="line"><span class="regexp">);</span></span><br></pre></td></tr></tbody></table></figure>
<p>&#x6CE8;&#x610F;&#xFF1A;</p>
<p>1 Provider&#xFF1A;&#x54EA;&#x4E2A;&#x7EC4;&#x4EF6;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x5B83;&#xFF0C;&#x5C31;&#x628A;&#x90A3;&#x4E2A;&#x7EC4;&#x4EF6;&#x653E;&#x5728;&#x5B83;&#x91CC;&#x9762;&#xFF0C;&#x5B83;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x7EC4;&#x4EF6;</p>
<p>2 store&#xFF1A;&#x662F;&#x8981;&#x4F20;&#x8FDB;&#x53BB;&#x7684;store</p>
<p>&#x200B;                    </p>
<h4 id="3-connect"><a href="#3-connect" class="headerlink" title="3 connect"></a>3 connect</h4><p>&#x653E;&#x5728; Provider &#x91CC;&#x7684;&#x7EC4;&#x4EF6;&#x8981;&#x8C03;&#x7528;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x7528;&#x6765;&#x8FDE;&#x63A5;store</p>
<p>component/counter.js :</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, { Component } <span class="keyword">from</span> <span class="string">&apos;react&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> { bindActionCreators } <span class="keyword">from</span> <span class="string">&apos;redux&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> {connect} <span class="keyword">from</span> <span class="string">&apos;react-redux&apos;</span>;</span><br><span class="line"><span class="comment">// import { getCountAddAction } from &apos;../store/actions/counter&apos;;</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> actions <span class="keyword">from</span> <span class="string">&apos;../store/actions/counter&apos;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>{</span><br><span class="line"></span><br><span class="line">  render () {</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        { <span class="keyword">this</span>.props.count }</span><br><span class="line">        &lt;button onClick={ <span class="keyword">this</span>.handleClick }&gt;add&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  handleClick = <span class="function"><span class="params">()</span> =&gt;</span> {</span><br><span class="line">    <span class="keyword">this</span>.props.add(<span class="number">6</span>)   </span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// const mapStateToProps = (state) =&gt; ({</span></span><br><span class="line"><span class="comment">//   count: state.counter.count</span></span><br><span class="line"><span class="comment">// })</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state</span>) =&gt;</span> state.counter;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1 &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x5B9A;&#x4E49;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x5C5E;&#x6027;&#x4E3A;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x4E2D;&#x8C03;&#x7528; dispatch</span></span><br><span class="line"><span class="comment">// const mapDispatchToProps = (dispatch) =&gt; ({</span></span><br><span class="line"><span class="comment">//   getCountAddAction: (val) =&gt; {</span></span><br><span class="line"><span class="comment">//     dispatch(getCountAddAction(val))</span></span><br><span class="line"><span class="comment">//   }</span></span><br><span class="line"><span class="comment">// })</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2 redux &#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x51FD;&#x6570;bindActionCreators&#xFF0C;&#x7ED1;&#x5B9A;&#x52A8;&#x4F5C;&#x521B;&#x5EFA;&#x8005;&#xFF0C;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x5C31;&#x662F;mapDispatchToProps&#x6240;&#x9700;&#x8981;&#x7684;&#x8FD4;&#x56DE;&#x503C;</span></span><br><span class="line"><span class="comment">// const mapDispatchToProps = (dispatch) =&gt; bindActionCreators(actions, dispatch)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3 &#x7531;&#x4E8E;&#x6BCF;&#x6B21;&#x90FD;&#x662F;&#x76F8;&#x540C;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x6240;&#x4EE5; react &#x5141;&#x8BB8;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x4F20; action &#x8FDB;&#x53BB;</span></span><br><span class="line"><span class="comment">// actions </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x7531;&#x4E8E;&#x6BCF;&#x6B21;mapDispatchToProps&#x90FD;&#x662F; &#x4F20; dispatch &#x8FDB;&#x53BB;&#xFF0C;&#x7136;&#x540E;&#x8FD4;&#x56DE;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapStateToProps, actions)(Counter);</span><br></pre></td></tr></tbody></table></figure>
<p>store/reducers/counter.js :</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> Types <span class="keyword">from</span> <span class="string">&apos;../actionTypes&apos;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initState = {</span><br><span class="line">  count: <span class="number">0</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (state=initState, action) =&gt; {</span><br><span class="line">  <span class="keyword">const</span> newState = <span class="built_in">JSON</span>.parse( <span class="built_in">JSON</span>.stringify(state));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">switch</span> (action.type) {</span><br><span class="line">    <span class="keyword">case</span> Types.COUNT_ADD:</span><br><span class="line">      newState.count = newState.count + action.n;</span><br><span class="line">      <span class="keyword">return</span> newState;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> state;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>store/actions/counter.js : </p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> Types <span class="keyword">from</span> <span class="string">&apos;../actionTypes&apos;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> add = <span class="function">(<span class="params">n</span>) =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    type: Types.COUNT_ADD,</span><br><span class="line">    n</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>&#x6CE8;&#x610F;&#xFF1A;</p>
<p>1 connect&#xFF1A;&#x63A5;&#x6536;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF1A;mapStateToProps&#xFF0C;mapDispatchToProps</p>
<p>2 mapStateToProps&#xFF1A;&#x628A;&#x8981;&#x8BA2;&#x9605;store&#x4E2D;&#x7684;&#x54EA;&#x4E2A;&#x503C;&#x4F20;&#x8FDB;&#x53BB;</p>
<p>3 mapDispatchToProps&#xFF1A;&#x8C03;&#x7528;&#x7684;&#x662F;&#x54EA;&#x4E2A;action &#x4F20;&#x8FDB;&#x53BB;</p>
<p>4 &#x8FD9;&#x6837;&#x5728;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6; handleClick &#x4E2D;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; this.props&#x8C03;&#x7528; store &#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;this.props.add(5)</p>
<p>&#x200B;                        </p>
<p>&#x5230;&#x8FD9;&#x91CC;&#xFF0C;react-redux &#x7684;&#x4F7F;&#x7528;&#x6B65;&#x9AA4;&#x5927;&#x4F53;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF0C;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x53D1;&#x73B0; &#x4EE3;&#x7801;&#x90FD;&#x662F;&#x6709;&#x95EE;&#x9898;&#x89E3;&#x51B3;&#x95EE;&#x9898;&#xFF0C;&#x518D;&#x8FDB;&#x4E00;&#x6B65;&#x4F18;&#x5316;&#x518D;&#x4F18;&#x5316;&#xFF01;</p>
<p>&#x200B;                    </p>
<h4 id="4-redux-thunk&#x3001;redux-promise&#x3001;redux-logger&#x3001;redux-saga-&#x4E2D;&#x95F4;&#x4ECB;"><a href="#4-redux-thunk&#x3001;redux-promise&#x3001;redux-logger&#x3001;redux-saga-&#x4E2D;&#x95F4;&#x4ECB;" class="headerlink" title="4 redux-thunk&#x3001;redux-promise&#x3001;redux-logger&#x3001;redux-saga &#x4E2D;&#x95F4;&#x4ECB;"></a>4 redux-thunk&#x3001;redux-promise&#x3001;redux-logger&#x3001;redux-saga &#x4E2D;&#x95F4;&#x4ECB;</h4><p>&#x5F53;&#x6211;&#x4EEC;&#x5728;&#x7EC4;&#x4EF6;&#x4E2D;&#x9700;&#x8981;&#x83B7;&#x53D6;&#x4E00;&#x4E9B;&#x521D;&#x59CB;&#x6570;&#x636E;&#xFF0C;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x5E76;&#x4E0D;&#x662F;&#x81EA;&#x5DF1;&#x79C1;&#x6709;&#x7684;&#xFF0C;&#x662F;&#x9700;&#x8981;&#x4F20;&#x7ED9;store&#x7684;&#xFF0C;&#x800C;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x6700;&#x521D;&#x662F;&#x901A;&#x8FC7;axios&#x7B49;&#x5F02;&#x6B65;&#x65B9;&#x5F0F;&#x83B7;&#x53D6;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x628A;&#x8FD9;&#x4E2A;axios&#x65B9;&#x6CD5;&#x5199;&#x5728; componentDidMount &#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x4F46;&#x8FD9;&#x6837;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x662F;&#xFF1A;&#x7EC4;&#x4EF6;&#x5728; componentDidMount &#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x901A;&#x8FC7; dispatch &#x4F20;&#x7ED9; store</p>
<p>&#x65E2;&#x7136;&#x662F;&#x8FD9;&#x6837;&#xFF0C;&#x90A3;&#x5E72;&#x561B;&#x4E0D;&#x76F4;&#x63A5;&#x5728; store &#x4E2D;&#x53BB;&#x83B7;&#x53D6;</p>
<p>store/actions/todoList.js :</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> Types <span class="keyword">from</span> <span class="string">&apos;../actionTypes&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&apos;axios&apos;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getInitList = <span class="function"><span class="params">list</span> =&gt;</span> {</span><br><span class="line">    </span><br><span class="line">  <span class="comment">// 1 axios&#x8BF7;&#x6C42;&#x662F;&#x5F02;&#x6B65;&#x7684;&#xFF0C;&#x663E;&#x7136;&#x4E0D;&#x53EF;&#x4EE5;</span></span><br><span class="line">  <span class="comment">// let data;</span></span><br><span class="line">  <span class="comment">// axios.get(&apos;list.json&apos;).then(res =&gt; {</span></span><br><span class="line">  <span class="comment">//   data = res;</span></span><br><span class="line">  <span class="comment">// })</span></span><br><span class="line">    </span><br><span class="line">  <span class="comment">// 2 &#x662F; return &#x4E86;&#xFF0C;&#x4F46;&#x5E76;&#x6CA1;&#x6709;&#x8FD4;&#x56DE;&#x51FA;&#x6765;</span></span><br><span class="line">  <span class="comment">// return () =&gt; ({</span></span><br><span class="line">  <span class="comment">//   axios.get(&apos;list.json&apos;).then(res =&gt; {</span></span><br><span class="line">  <span class="comment">//     dispatch({</span></span><br><span class="line">  <span class="comment">//       type: Types.GET_INIT_LIST,</span></span><br><span class="line">  <span class="comment">//       list: res</span></span><br><span class="line">  <span class="comment">//     })</span></span><br><span class="line">  <span class="comment">//   })</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// return {</span></span><br><span class="line">  <span class="comment">//   type: Types.GET_INIT_LIST,</span></span><br><span class="line">  <span class="comment">//   list: data</span></span><br><span class="line">  <span class="comment">// }</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>&#x55EF;&#xFF0C;react &#x662F;&#x4E00;&#x4E2A;&#x6210;&#x719F;&#x7684;&#x6846;&#x67B6;&#xFF0C;&#x5B83;&#x663E;&#x7136;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x522B;&#x7684;&#x65B9;&#x5F0F;&#x5728; store &#x4E2D;&#x83B7;&#x53D6;&#xFF0C;&#x914D;&#x548C;redux &#x4E2D;&#x7684; redux-thunk&#x3001;redux-promise &#x53EF;&#x4EE5;&#x5B9E;&#x73B0;</p>
<h6 id="redux-thunk"><a href="#redux-thunk" class="headerlink" title="redux-thunk"></a>redux-thunk</h6><p>&#x5B89;&#x88C5;&#xFF1A;npm install redux-thunk &#x2013;save</p>
<p>store/index.js :</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { createStore, applyMiddleware } <span class="keyword">from</span> <span class="string">&apos;redux&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">&apos;./reducers&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">&apos;redux-thunk&apos;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(</span><br><span class="line">  reducer,</span><br><span class="line">  applyMiddleware(thunk)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></tbody></table></figure>
<p>store/actions/todoList.js :</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> Types <span class="keyword">from</span> <span class="string">&apos;../actionTypes&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&apos;axios&apos;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getInitList = <span class="function"><span class="params">list</span> =&gt;</span> {</span><br><span class="line"></span><br><span class="line">   <span class="keyword">return</span> <span class="function"><span class="params">dispatch</span> =&gt;</span> {</span><br><span class="line">    axios.get(<span class="string">&apos;list.json&apos;</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> {</span><br><span class="line">      dispatch({</span><br><span class="line">        type: Types.GET_INIT_LIST,</span><br><span class="line">        list: res</span><br><span class="line">      })</span><br><span class="line">    })</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h6 id="redux-promise"><a href="#redux-promise" class="headerlink" title="redux-promise"></a>redux-promise</h6><p>&#x5B89;&#x88C5;&#xFF1A;npm install redux-promise &#x2013;save</p>
<p>store/index.js &#xFF1A;</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { createStore, applyMiddleware } <span class="keyword">from</span> <span class="string">&apos;redux&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">&apos;./reducers&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">&apos;redux-thunk&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> promise <span class="keyword">from</span> <span class="string">&apos;redux-promise&apos;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(</span><br><span class="line">  reducer,</span><br><span class="line">  applyMiddleware(thunk, promise)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></tbody></table></figure>
<p>store/actions/todoList.js :</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> Types <span class="keyword">from</span> <span class="string">&apos;../actionTypes&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&apos;axios&apos;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getInitList = <span class="function"><span class="params">list</span> =&gt;</span> {</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>( <span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">    axios.get(<span class="string">&apos;list.json&apos;</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> {</span><br><span class="line">      resolve({</span><br><span class="line">        type: Types.GET_INIT_LIST,</span><br><span class="line">        list: res</span><br><span class="line">      })</span><br><span class="line">    })</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h6 id="redux-logger"><a href="#redux-logger" class="headerlink" title="redux-logger"></a>redux-logger</h6><p>&#x8FD9;&#x4E2A;&#x4E2D;&#x95F4;&#x4ECB; &#x662F;&#x4E3A;&#x4E86;&#x77E5;&#x9053;&#x5728;&#x4EFB;&#x52A1;&#x6D3E;&#x53D1;&#x4E4B;&#x524D;&#x548C;&#x6D3E;&#x53D1;&#x4E4B;&#x540E;&#x7684;&#x4E00;&#x4E2A;&#x72B6;&#x6001;</p>
<p>&#x5B89;&#x88C5;&#xFF1A;npm install redux-logger &#x2013;save</p>
<p>store/index.js :</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { createStore, applyMiddleware, compose } <span class="keyword">from</span> <span class="string">&apos;redux&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">&apos;./reducers&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">&apos;redux-thunk&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> promise <span class="keyword">from</span> <span class="string">&apos;redux-promise&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> logger <span class="keyword">from</span> <span class="string">&apos;redux-logger&apos;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(</span><br><span class="line">  reducer,</span><br><span class="line">  applyMiddleware(thunk, promise, logger)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></tbody></table></figure>
<p>&#x8FD9;&#x65F6;&#x5019;&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x63A7;&#x5236;&#x53F0;&#x770B;&#x5230;&#x4EFB;&#x52A1;&#x6D3E;&#x53D1;&#x524D;&#x548C;&#x6D3E;&#x53D1;&#x540E;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="/posts/adc7e95b/five.png" alt=""></p>
<p>&#x5728;&#x524D;&#x9762;&#x7684; index.js &#x4E2D;&#x628A; window&#x90A3;&#x4E00;&#x53E5;&#x5220;&#x9664;&#x4E86;&#xFF0C;&#x4F46;&#x5B83;&#x662F;&#x7528;&#x6765;&#x5728;&#x63A7;&#x5236;&#x53F0;&#x6253;&#x5F00; redux &#x7684;&#xFF0C;&#x73B0;&#x5728;&#x628A;&#x5B83;&#x52A0;&#x56DE;&#x6765;&#xFF0C;&#x8FD9;&#x4E2A;&#x5728;github&#x4E0A;&#x6709;&#x4F7F;&#x7528;&#x8BF4;&#x660E;</p>
<p>index.js :</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { createStore, applyMiddleware, compose } <span class="keyword">from</span> <span class="string">&apos;redux&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">&apos;./reducers&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">&apos;redux-thunk&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> promise <span class="keyword">from</span> <span class="string">&apos;redux-promise&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> logger <span class="keyword">from</span> <span class="string">&apos;redux-logger&apos;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> composeEnhancers = <span class="built_in">window</span>.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(</span><br><span class="line">  reducer,</span><br><span class="line">  composeEnhancers( applyMiddleware(thunk, promise, logger) )</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></tbody></table></figure>
<h6 id="redux-saga"><a href="#redux-saga" class="headerlink" title="redux-saga"></a>redux-saga</h6><p>&#x8FD9;&#x4E2A;&#x4E2D;&#x95F4;&#x4ECB;&#x4F5C;&#x7528;&#x548C; redux-thunk &#x4E00;&#x6837;&#xFF0C;&#x4E5F;&#x662F;&#x5728; action &#x4E2D;&#x53EF;&#x4EE5;&#x8C03;&#x7528;&#x4E00;&#x6B21;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#xFF0C;&#x4F46;&#x4F7F;&#x7528;&#x7684;&#x65B9;&#x5F0F;&#x6709;&#x5F88;&#x5927;&#x4E0D;&#x540C;</p>
<p>&#x5B89;&#x88C5;&#xFF1A;npm install redux-saga &#x2013;save</p>
<p>store/index.js :</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { createStore, applyMiddleware } <span class="keyword">from</span> <span class="string">&apos;redux&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">&apos;./reducers&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> createSagaMiddleware <span class="keyword">from</span> <span class="string">&apos;redux-saga&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> mySaga <span class="keyword">from</span> <span class="string">&apos;./sagas&apos;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sagaMiddleware = createSagaMiddleware();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(</span><br><span class="line">  reducer,</span><br><span class="line">  applyMiddleware(sagaMiddleware)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">sagaMiddleware.run(mySaga);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></tbody></table></figure>
<p>store/sagas.js , &#x5728;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x4E2D;&#x96C6;&#x4E2D;&#x5904;&#x7406;&#x5BF9;&#x5F02;&#x6B65;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x5B83;&#x80FD;&#x591F;&#x611F;&#x77E5;&#x5230;&#x6BCF;&#x4E00;&#x6B21;&#x4EFB;&#x52A1;&#x6D3E;&#x53D1;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x5F53;&#x6D3E;&#x53D1;&#x67D0;&#x4E2A;&#x4EFB;&#x52A1;&#x65F6;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x6267;&#x884C;&#x76F8;&#x5E94;&#x7684;&#x65B9;&#x6CD5;</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { takeEvery, put } <span class="keyword">from</span> <span class="string">&apos;redux-saga/effects&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&apos;axios&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> Types <span class="keyword">from</span> <span class="string">&apos;./actionTypes&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> actions <span class="keyword">from</span> <span class="string">&apos;./actions/todoList&apos;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">mySaga</span> (<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">yield</span> takeEvery(Types.ADD_TODO_ITEM, addItem);</span><br><span class="line">  <span class="keyword">yield</span> takeEvery(Types.GET_TODO_DATA,  getTodoData);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">addItem</span> (<span class="params"></span>) </span>{</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&apos;add&apos;</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">getTodoData</span> (<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">yield</span> axios.get(<span class="string">&apos;list.json&apos;</span>);</span><br><span class="line">    <span class="keyword">const</span> action = actions.getInitList(data);</span><br><span class="line">    <span class="keyword">yield</span> put(action);</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"><span class="comment">// put: &#x8FD9;&#x91CC;&#x4E0D;&#x9700;&#x8981;&#x7528; dispatch &#x8FDB;&#x884C;&#x4EFB;&#x52A1;&#x7684;&#x6D3E;&#x53D1;&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A; put &#x65B9;&#x6CD5;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x5B83;&#x6765;&#x8FDB;&#x884C;&#x4EFB;&#x52A1;&#x7684;&#x6D3E;&#x53D1;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> mySaga;</span><br></pre></td></tr></tbody></table></figure>
<p>component/todoList.js :</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">componentDidMount () {</span><br><span class="line">  <span class="keyword">this</span>.props.getTodoData();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>&#x8FD9;&#x56DB;&#x4E2A;&#x4E2D;&#x95F4;&#x4ECB;&#x662F;&#x76EE;&#x524D;&#x6211;&#x4E86;&#x89E3;&#x5230;&#x7684;&#xFF0C;&#x57FA;&#x672C;&#x533A;&#x522B;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>redux-thunk&#xFF1A;&#x5E2E;&#x52A9;action&#x63A5;&#x53D7;&#x51FD;&#x6570;,&#x80FD;&#x5728;redux&#x53D1;&#x9001;&#x4E00;&#x6B21;&#x5F02;&#x6B65;&#x8BF7;&#x6C42;</p>
<p>redux-promise&#xFF1A;&#x5E2E;&#x52A9;action&#x63A5;&#x6536;promise</p>
<p>redux-logger&#xFF1A;&#x4E86;&#x89E3;&#x6D3E;&#x53D1;&#x4E4B;&#x524D;&#x548C;&#x6D3E;&#x53D1;&#x4E4B;&#x540E;&#x7684;&#x72B6;&#x6001;</p>
<p>redux-saga&#xFF1A;&#x548C;redux-thunk&#x6709;&#x70B9;&#x76F8;&#x4F3C;,&#x4E5F;&#x80FD;&#x5728;redux&#x4E2D;&#x53D1;&#x9001;&#x4E00;&#x6B21;&#x5F02;&#x6B65;&#x8BF7;&#x6C42;,&#x4F46;&#x4E24;&#x8005;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#x6709;&#x5F88;&#x5927;&#x4E0D;&#x540C;</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
    
  </div>
</article>

    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-安装-react-redux"><span class="post-toc-number">1.</span> <span class="post-toc-text">1 安装 react-redux</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-引入-react-redux"><span class="post-toc-number">2.</span> <span class="post-toc-text">2 引入 react-redux</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-connect"><span class="post-toc-number">3.</span> <span class="post-toc-text">3 connect</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-redux-thunk、redux-promise、redux-logger、redux-saga-中间介"><span class="post-toc-number">4.</span> <span class="post-toc-text">4 redux-thunk、redux-promise、redux-logger、redux-saga 中间介</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#redux-thunk"><span class="post-toc-number">4.0.1.</span> <span class="post-toc-text">redux-thunk</span></a></li><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#redux-promise"><span class="post-toc-number">4.0.2.</span> <span class="post-toc-text">redux-promise</span></a></li><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#redux-logger"><span class="post-toc-number">4.0.3.</span> <span class="post-toc-text">redux-logger</span></a></li><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#redux-saga"><span class="post-toc-number">4.0.4.</span> <span class="post-toc-text">redux-saga</span></a></li></ol></li></ol></li></ol>
        </nav>
    </aside>
   
    </div>
    <footer class="footer-nav">
      
  <span class="footer-msg">
    2018
    
    
    <span class="timeDivide">-</span>
    
    Orange~.&nbsp;
    Power by
    <a href="https://hexo.io/" target="_blank" rel="external nofollow">Hexo</a>
    and
    <a class="orangelink" href="https://github.com/" target="_blank" rel="">
      orange</a>
  </span>

    </footer>
    <div class="back-top" id="back-top">
      <i class="back-top-icon"></i>
    </div>
    
  
  <script src="/js/jquery/jquery-3.1.1.min.js"></script>

    <script src="/js/theme.js"></script>
    <script src="/js/index.js"></script>
  
  </div>
</body>