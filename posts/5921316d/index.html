<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="喜欢晴天，喜欢雨天">
    
      <link rel="icon" href="/img/favicon.ico">
    
    <meta name="keyword"  content="">
    <link rel="stylesheet" href="/css/style.css">
</head>

<body>

  <div class="page">
    <div class="head">
      <header class="head-header">
  <h1 class="head-authorH">
    <a href="/" class="head-authorLink">
      橙子</a>
  </h1>
  <div class="head-right">
    <!-- <div class="head-search">
      <input class="head-searchK"></input>
      <span class="head-searchT">
        </span>
    </div> -->
    <button class="barWrap" id="barWrap-toggle">
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
    </button>
    <div class="head-about" id="head-about">
      
      <a class="head-aboutLink" href="/about">
        About</a>
      
    </div>
  </div>
</header>
    </div>
    <div class="main">
        <div class="barShow-head" id="barShow">
  <ul class="barShow-ul">
    
      <li class="barShow-item">
        <a href="/archives"><span>
            Archives</span></a>
      </li>
    
      <li class="barShow-item">
        <a href="/categories/life"><span>
            Lifes</span></a>
      </li>
    
      <li class="barShow-item">
        <a href="/tags"><span>
            Tags</span></a>
      </li>
    
    
      <li class="barShow-item">
        <a class="head-aboutLink" href="/about">
          About
        </a>
      </li>
    
  </ul>
</div>
      <article class="post" id="post">
  <header class="post-head">
    <h1 class="post-title">
      <a class="title" href="/posts/5921316d/">
        react 之 TodoList
      </a>
    </h1>
  </header>
  <div class="post-datetag">
    <div class="post-date">
      <time class="post-time" title="2019-02-14 16:46:57" datetime="2019-02-14T08:46:57.000Z" itemprop="datePublished">
  2019-02-14</time>
    </div>
    <div class="post-tag">
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/">react</a></li></ul>

    </div>
  </div>
  <div class="article-entry" itemprop="articleBody">
    
    <p>&#x8FD9;&#x6B21;&#x662F;&#x7528;TodoList&#x6765;&#x603B;&#x7ED3;&#x4E00;&#x4E9B;react&#x4E2D;&#x7684;&#x70B9;&#xFF0C;&#x5982;vue&#x4E2D;&#x7684;v-model&#x5728;react&#x4E2D;&#x8981;&#x600E;&#x4E48;&#x505A;&#xFF0C;&#x7EC4;&#x4EF6;&#x4E4B;&#x95F4;&#x600E;&#x4E48;&#x4F20;&#x503C;&#xFF0C;&#x5C5E;&#x6027;&#x6821;&#x9A8C;&#x7B49;<a id="more"></a></p>
<p>TodoList&#x5C0F;&#x7EC3;&#x4E60;&#x7684;&#x9875;&#x9762;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>&#x200B;                </p>
<p><img src="/posts/5921316d/todoList.png" alt=""></p>
<h4 id="state-&#x3001;setState"><a href="#state-&#x3001;setState" class="headerlink" title="state &#x3001;setState"></a>state &#x3001;setState</h4><p>&#x9996;&#x5148;&#xFF0C;react&#x4E2D;&#x6CA1;&#x6709;v-model&#xFF0C;&#x6240;&#x4EE5;input&#x4E2D;&#x7684;&#x6570;&#x636E;&#x53CC;&#x5411;&#x7ED1;&#x5B9A;&#x9700;&#x8981; state&#xFF0C;onChange&#xFF0C;setState&#x6765;&#x914D;&#x5408;</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">import React from &apos;react&apos;;</span><br><span class="line"></span><br><span class="line">class TodoList extends React.Component {</span><br><span class="line"></span><br><span class="line">  // &#x72B6;&#x6001;</span><br><span class="line">  state = {</span><br><span class="line">    inpVal: &apos;&apos;,</span><br><span class="line">    list: [&apos;&#x84DD;&#x5929;&apos;, &apos;&#x767D;&#x4E91;&apos;, &apos;&#x9752;&#x5C71;&apos;],</span><br><span class="line">    count: 0</span><br><span class="line">  }</span><br><span class="line">  handleChange = e =&gt; {</span><br><span class="line">    this.setState({</span><br><span class="line">      inpVal: e.target.value</span><br><span class="line">    })</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  handleClick = () =&gt; {</span><br><span class="line">    this.setState({</span><br><span class="line">      list: [...this.state.list, this.state.inpVal],</span><br><span class="line">      inpVal: &apos;&apos;</span><br><span class="line">    })</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  handleDelete = index =&gt; {</span><br><span class="line">    const list = this.state.list;</span><br><span class="line">    list.splice(index, 1);</span><br><span class="line"></span><br><span class="line">    this.setState({</span><br><span class="line">      list</span><br><span class="line">    })</span><br><span class="line">  }</span><br><span class="line">  render() {</span><br><span class="line">    return (</span><br><span class="line">      &lt;&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;input type=&quot;text&quot; value={ this.state.inpVal } onChange={ this.handleChange } /&gt;</span><br><span class="line">          &lt;button onClick={ this.handleClick }&gt;&#x6DFB;&#x52A0;&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          {</span><br><span class="line">            this.state.list.map( (item, index) =&gt; (</span><br><span class="line">              &lt;li key={ item }&gt;</span><br><span class="line">                { item }</span><br><span class="line">                &lt;button onClick={ () =&gt; { this.handleDelete(index) } }&gt;X&lt;/button&gt;</span><br><span class="line">              &lt;/li&gt;</span><br><span class="line">            ))</span><br><span class="line">          }</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/&gt;</span><br><span class="line">    )</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default TodoList;</span><br></pre></td></tr></tbody></table></figure>
<p>&#x6CE8;&#x610F;&#xFF1A;</p>
<p>&#x200B;    1 &#x5728;&#x7ED1;&#x5B9A;&#x4E8B;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8981;&#x6CE8;&#x610F;this&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x53EF;&#x4EE5;&#x5199;<code>onChange={ this.handleChange }</code> &#x6210; &#x6216;&#x8005; &#x7528;&#x6587;&#x4E2D;&#x7684;&#x8FD9;&#x79CD;&#x7BAD;&#x5934;&#x51FD;&#x6570;&#x7684;&#x65B9;&#x5F0F;</p>
<p>&#x200B;    2 input&#x7ED1;&#x5B9A;&#x7684;&#x662F;state&#x4E2D;&#x7684;&#x503C;&#xFF0C;&#x6240;&#x4EE5;&#x521A;&#x5F00;&#x59CB;&#x6CA1;&#x7ED1;&#x5B9A;onChange&#x4E8B;&#x4EF6;&#x65F6;&#x4F1A;&#x53D1;&#x73B0;&#x65E0;&#x6CD5;&#x8F93;&#x5165;&#xFF0C;&#x56E0;&#x4E3A;state&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x6539;&#x53D8;&#xFF0C;&#x9700;&#x8981;&#x901A;&#x8FC7;setState&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x6539;&#x53D8;state&#x4E2D;&#x7684;&#x503C;&#xFF0C;&#x6DFB;&#x52A0;&#x6309;&#x94AE;&#x4E5F;&#x662F;&#x540C;&#x6837;&#x7684;&#x9053;&#x7406;&#xFF0C;list&#x9700;&#x8981;&#x901A;&#x8FC7;setState&#x6765;&#x6539;&#x53D8;</p>
<p>&#x200B;    3 &#x5F53;&#x9700;&#x8981;&#x4F20;&#x53C2;&#x65F6;&#xFF0C;&#x4F7F;&#x7528; <code>onClick={ () =&gt; { this.handleDelete(index) } }</code>, &#x800C;&#x4E0D;&#x662F; <code>onClick={ this.handleDelete(index) }</code>, &#x540E;&#x8005;&#x5728;&#x7ED1;&#x5B9A;&#x7684;&#x65F6;&#x5019;&#x5C31;&#x4F1A;&#x6267;&#x884C;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x524D;&#x8005;&#xFF0C;&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x5199;&#x6210; <code>bind(this</code>)</p>
<p>&#x200B;    4 &#x5F53;&#x4F7F;&#x7528;map&#x7684;&#x65B9;&#x6CD5;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x52A0;&#x4E2A;key&#x503C;&#x6765;&#x8868;&#x660E;&#x552F;&#x4E00;&#x6027;&#xFF0C;&#x5C3D;&#x91CF;&#x4E0D;&#x8981;&#x7528;index&#xFF08;&#x56E0;&#x4E3A;&#x5F53;list&#x7684;&#x503C;&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF0C;&#x9875;&#x9762;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x6E32;&#x67D3;&#x7684;&#x65F6;&#x5019;&#xFF0C;react&#x662F;&#x6839;&#x636E;key&#x6765;&#x548C;&#x4E0A;&#x4E00;&#x6B21;&#x7684;&#x8FDB;&#x884C;&#x5BF9;&#x6BD4;&#x7684;&#xFF0C;&#x82E5;key&#x7684;&#x8FD9;&#x4E2A;&#x5143;&#x7D20;&#x4F9D;&#x7136;&#xFF09;</p>
<p>&#x200B;                </p>
<p>&#x73B0;&#x5728;&#x6709;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x5982;&#x4E0B;</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">state = {</span><br><span class="line">    count: 0</span><br><span class="line">}</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;span&gt;{ this.state.count }&lt;/span&gt;</span><br><span class="line">    &lt;button onClick={ this.handleAdd }&gt;&#x6DFB;&#x52A0;&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">handleAdd = () =&gt;{</span><br><span class="line"></span><br><span class="line">    //this.setState({</span><br><span class="line">    //  count: 2</span><br><span class="line">    //})</span><br><span class="line">	this.setState((prevState) =&gt; {</span><br><span class="line">      return {</span><br><span class="line">        count: prevState.count + 1</span><br><span class="line">      }</span><br><span class="line">    })</span><br><span class="line">    this.setState((prevState) =&gt; {</span><br><span class="line">      return {</span><br><span class="line">        count: prevState.count + 2</span><br><span class="line">      }</span><br><span class="line">    })</span><br><span class="line">    this.setState((prevState) =&gt; {</span><br><span class="line">      return {</span><br><span class="line">        count: prevState.count + 3</span><br><span class="line">      }</span><br><span class="line">    })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>&#x5F53;&#x70B9;&#x51FB;&#x6DFB;&#x52A0;&#x6309;&#x94AE;&#x65F6;&#xFF0C;count &#x4F1A;&#x52A0; 6 &#x5417;&#xFF0C;&#x5E76;&#x6CA1;&#x6709;&#xFF0C;&#x8FD9;&#x91CC;&#x53EA;&#x52A0;&#x4E86; 3 &#xFF0C;&#x800C;&#x8FD9;&#x51E0;&#x53E5;&#x6362;&#x4E2A;&#x4F4D;&#x7F6E;&#x4F1A;&#x53D1;&#x73B0;&#xFF0C;&#x52A0;&#x7684;&#x503C;&#x53D8;&#x4E86;&#xFF0C;&#x4F46;&#x59CB;&#x7EC8;&#x4E0D;&#x662F; &#x52A0; 6 &#xFF0C;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;setState&#x4F1A;&#x6709;&#x4E2A;&#x4E8B;&#x4EF6;&#x961F;&#x5217;&#xFF0C;&#x5F53;&#x5BF9;&#x6BD4;&#x53D1;&#x73B0;&#x6539;&#x53D8;&#x7684;&#x662F;&#x540C;&#x4E00;&#x4E2A;state&#x5C5E;&#x6027;&#x65F6;&#xFF0C;&#x4F1A;&#x8FDB;&#x884C;&#x540E;&#x9762;&#x7684;&#x8986;&#x76D6;&#x524D;&#x9762;&#x7684;</p>
<p>&#x200B;                                </p>
<h4 id="&#x53D7;&#x63A7;&#x7EC4;&#x4EF6;&#x3001;&#x975E;&#x53D7;&#x63A7;&#x7EC4;&#x4EF6;"><a href="#&#x53D7;&#x63A7;&#x7EC4;&#x4EF6;&#x3001;&#x975E;&#x53D7;&#x63A7;&#x7EC4;&#x4EF6;" class="headerlink" title="&#x53D7;&#x63A7;&#x7EC4;&#x4EF6;&#x3001;&#x975E;&#x53D7;&#x63A7;&#x7EC4;&#x4EF6;"></a>&#x53D7;&#x63A7;&#x7EC4;&#x4EF6;&#x3001;&#x975E;&#x53D7;&#x63A7;&#x7EC4;&#x4EF6;</h4><p>&#x200B;    &#x53D7;&#x63A7;&#x7EC4;&#x4EF6;&#x548C;&#x975E;&#x53D7;&#x63A7;&#x7EC4;&#x4EF6;&#x7684;&#x533A;&#x522B;&#x5C31;&#x662F;&#xFF1A;&#x662F;&#x5426;&#x53D7;&#x72B6;&#x6001;&#x5F71;&#x54CD;</p>
<p>&#x200B;    &#x53D7;&#x63A7;&#x7EC4;&#x4EF6;&#x5C31;&#x662F;&#x4E0A;&#x9762;&#x5199;&#x7684;&#x90A3;&#x79CD;, input&#x6846;&#x7684;&#x503C;&#x53D7;state&#x4E2D;&#x7684;&#x5F71;&#x54CD;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x662F;&#x53D7;&#x63A7;&#x7EC4;&#x4EF6;&#xFF0C;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> value={ <span class="keyword">this</span>.state.inpVal } onChange={ <span class="keyword">this</span>.handleChange } /&gt;</span><br></pre></td></tr></tbody></table></figure>
<p>&#x200B;    &#x975E;&#x53D7;&#x63A7;&#x7EC4;&#x4EF6;&#x5C31;&#x662F;&#x7ED9;&#x4E00;&#x4E2A;&#x7EC4;&#x4EF6;&#x8D77;&#x4E86;&#x4E2A;&#x540D;&#x5B57;&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x8FD9;&#x4E2A;&#x540D;&#x5B57;&#x627E;&#x5230;&#x8FD9;&#x4E2A;&#x7EC4;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x53BB;&#x83B7;&#x53D6;&#x4E00;&#x4E9B;&#x4FE1;&#x606F;&#xFF0C;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &#x65B9;&#x5F0F;&#x4E00;&#xFF1A;</span></span><br><span class="line"><span class="comment">// &#x8FD9;&#x6837;&#x5C31;&#x76F8;&#x5F53;&#x4E8E; this.inp = &lt;input type=&quot;text&quot; /&gt;&#xFF0C;this.inp.value &#x5C31;&#x53EF;&#x4EE5;&#x83B7;&#x53D6;&#x5230;&#x8FD9;&#x4E2A;input&#x7684;&#x503C;&#x4E86;</span></span><br><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> ref={ (dom) =&gt; {<span class="keyword">this</span>.inp = dom} } /&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x65B9;&#x5F0F;&#x4E8C;&#xFF1A;</span></span><br><span class="line"><span class="comment">// this.inp.current.value &#x5C31;&#x53EF;&#x4EE5;&#x83B7;&#x5F97;&#x8FD9;&#x4E2A;input&#x7684;&#x503C;&#x4E86;</span></span><br><span class="line">inp = React.createRef() <span class="comment">// 16.3&#x4EE5;&#x540E;</span></span><br><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> ref={ <span class="keyword">this</span>.inp } } /&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x8FD9;&#x6837;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x53D7;&#x63A7;&#x7EC4;&#x4EF6;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x5728;input&#x6709;&#x6240;&#x6539;&#x53D8;&#x7684;&#x65F6;&#x5019;&#x5C31;&#x4F1A;&#x89E6;&#x53D1;setState&#xFF0C;&#x800C;&#x975E;&#x53D7;&#x63A7;&#x7EC4;&#x4EF6;&#x5E76;&#x4E0D;&#x4F1A;</span></span><br></pre></td></tr></tbody></table></figure>
<p>&#x200B;                            </p>
<h4 id="&#x5C5E;&#x6027;&#x6821;&#x9A8C;"><a href="#&#x5C5E;&#x6027;&#x6821;&#x9A8C;" class="headerlink" title="&#x5C5E;&#x6027;&#x6821;&#x9A8C;"></a>&#x5C5E;&#x6027;&#x6821;&#x9A8C;</h4><p>&#x5F53;&#x4E00;&#x4E2A;&#x7EC4;&#x4EF6;&#x4F20;&#x503C;&#x7ED9;&#x53E6;&#x4E00;&#x4E2A;&#x7EC4;&#x4EF6;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x4EE5;&#x4E0B;&#x51E0;&#x6B65;&#xFF1A;</p>
<p>&#x7236;&#x7EC4;&#x4EF6;&#xFF1A;</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = {</span><br><span class="line">  name: <span class="string">&apos;&#x5C0F;&#x5B89;&apos;</span>,</span><br><span class="line">  age: <span class="number">18</span>,</span><br><span class="line">  sex: <span class="string">&apos;&#x5973;&apos;</span>,</span><br><span class="line">  figure: {</span><br><span class="line">    weight: <span class="number">95</span>,</span><br><span class="line">    height: <span class="number">168</span></span><br><span class="line">  },</span><br><span class="line">  hobby: [<span class="string">&apos;&#x770B;&#x7535;&#x5F71;&apos;</span>, <span class="string">&apos;&#x770B;&#x4E66;&apos;</span>],</span><br><span class="line">  salary: <span class="number">100</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">render(<span class="xml"><span class="tag">&lt;<span class="name">Person</span> {<span class="attr">...person</span>}&gt;</span><span class="tag">&lt;/<span class="name">Person</span>&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">&apos;root&apos;</span>))</span><br><span class="line"><span class="comment">// &#x8FD9;&#x91CC;&#x4E5F;&#x53EF;&#x4EE5;&#x628A; {...person} &#x5199;&#x6210; person&#xFF0C;&#x4E0D;&#x8FC7;&#x540E;&#x8005;&#x8BD5;&#x5957;&#x4E86;&#x4E00;&#x5C42;</span></span><br></pre></td></tr></tbody></table></figure>
<p>&#x5B50;&#x7EC4;&#x4EF6;&#xFF1A;</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> { name, age, sex, figure, hobby, salary } = <span class="keyword">this</span>.props</span><br><span class="line"></span><br><span class="line"> &lt;div&gt;{name} &#x4E2A;&#x4EBA;&#x8D44;&#x6599;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp"> &lt;div&gt;&#x5E74;&#x9F84;&#xFF1A;{ age }&lt;/</span>div&gt;</span><br><span class="line"> &lt;div&gt;&#x6027;&#x522B;&#xFF1A;{ sex }&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp"> ...</span></span><br></pre></td></tr></tbody></table></figure>
<p>&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x5C5E;&#x6027;&#xFF0C;&#x6BD4;&#x5982;name&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#xFF0C;&#x7236;&#x7EC4;&#x4EF6;&#x6709;&#x4F20; name&#xFF0C;&#x90A3;&#x5C31;&#x7528;&#x7236;&#x7EC4;&#x4EF6;&#x4F20;&#x8FC7;&#x6765;&#x7684;&#xFF0C;&#x6CA1;&#x6709;&#x90A3;&#x5C31;&#x7528;&#x81EA;&#x5DF1;&#x7684;&#xFF0C;&#x5982;&#x4E0B;&#xFF08;&#x5B50;&#x7EC4;&#x4EF6;&#x4E2D;&#xFF09;&#xFF1A;</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> defaultProps = {</span><br><span class="line">  name: <span class="string">&apos;duyi&apos;</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>&#x5B50;&#x7EC4;&#x4EF6;&#x901A;&#x8FC7; <code>this.props</code>  &#x83B7;&#x53D6;&#x7236;&#x7EC4;&#x4EF6;&#x4F20;&#x8FC7;&#x6765;&#x7684;&#x503C;(props&#x4E2D;&#x7684;&#x503C;&#x662F;&#x53EA;&#x8BFB;&#x7684;)&#xFF0C;&#x4F46;&#x5F53;&#x7EC4;&#x4EF6;&#x9700;&#x8981;number&#x800C;&#x7236;&#x7EC4;&#x4EF6;&#x4F20;&#x7684;&#x662F;string &#x65F6;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x5C5E;&#x6027;&#x6821;&#x9A8C;&#x4E86;&#xFF0C;&#x5C5E;&#x6027;&#x6821;&#x9A8C;&#x9700;&#x8981;&#x4EE5;&#x4E0B;&#x51E0;&#x6B65;&#xFF1A;</p>
<p>1 &#x5B89;&#x88C5;  <code>prop-types</code>  &#xFF1A;<code>npm install prop-type --save</code></p>
<p>2 &#x5728;&#x5B50;&#x7EC4;&#x4EF6;&#x5F15;&#x5165;&#x5B83;&#xFF1A;</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import PropTypes from &apos;prop-types&apos;;</span><br></pre></td></tr></tbody></table></figure>
<p>3 &#x5B9A;&#x4E49;&#x6240;&#x9700;&#x8981;&#x7684;&#x5C5E;&#x6027;&#x5404;&#x662F;&#x4EC0;&#x4E48;&#x7C7B;&#x578B;&#xFF1A;</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &#x8FD9;&#x4E9B;&#x5728;github&#x5B98;&#x7F51;&#x4E0A;&#x90FD;&#x6709;</span></span><br><span class="line">  <span class="keyword">static</span> propTypes = {</span><br><span class="line">    name: PropTypes.string,</span><br><span class="line">    age: PropTypes.number,</span><br><span class="line">    sex: PropTypes.oneOf([<span class="string">&apos;&#x7537;&apos;</span>, <span class="string">&apos;&#x5973;&apos;</span>]),</span><br><span class="line">    figure: PropTypes.objectOf(PropTypes.number),</span><br><span class="line">    hobby: PropTypes.arrayOf(PropTypes.string),</span><br><span class="line">    salary (props, propsName, componentName) {</span><br><span class="line">      <span class="keyword">if</span>(props[propsName] &lt; <span class="number">10000</span>) {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Error</span>(</span><br><span class="line">          <span class="string">`<span class="subst">${componentName}</span>&#x7EC4;&#x4EF6;&#x4F20;&#x9012;&#x8FC7;&#x6765;&#x7684;<span class="subst">${propsName}</span>&#x5C5E;&#x6027;&#x7684;&#x503C;&#x592A;&#x5C0F;&#x5566;&#xFF0C;&#x5E94;&#x8BE5;&#x5927;&#x4E8E;1&#x4E07;`</span></span><br><span class="line">        );</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>
<p>&#x8FD9;&#x6837;&#x5C5E;&#x6027;&#x6821;&#x9A8C;&#x5C31;&#x597D;&#x4E86;</p>
<h4 id="&#x7EC4;&#x4EF6;&#x4EA4;&#x4E92;"><a href="#&#x7EC4;&#x4EF6;&#x4EA4;&#x4E92;" class="headerlink" title="&#x7EC4;&#x4EF6;&#x4EA4;&#x4E92;"></a>&#x7EC4;&#x4EF6;&#x4EA4;&#x4E92;</h4><p>&#x8FD8;&#x662F;&#x4EE5; &#x8FD9;&#x4E2A;TodoList&#x4E3A;&#x4F8B;&#xFF0C;&#x628A;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#x5206;&#x6210;&#x4E86;&#x4E0B;&#x9762;&#x8FD9;&#x6837;&#x7684;&#x51E0;&#x4E2A;&#x7EC4;&#x4EF6;&#xFF1A;</p>
<p><img src="/posts/5921316d/comp.png" alt="&#x56FE;&#x4E00;"></p>
<p>&#x200B;                        </p>
<p>&#x200B;                </p>
<p>&#x7236;&#x5B50;&#x7EC4;&#x4EF6;&#x4E4B;&#x95F4;&#x7684;&#x4F20;&#x503C;&#x5982;&#x524D;&#x9762;&#x90A3;&#x6837;&#xFF0C;&#x4F46;&#x5982;&#x679C;&#x8DF3;&#x7EA7;&#x4F20;&#x503C;&#x7684;&#x8BDD;&#xFF0C;&#x4E00;&#x5C42;&#x4E00;&#x5C42;&#x4F20;&#x4E0B;&#x53BB;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;&#xFF0C;&#x6240;&#x4EE5;react&#x4E2D;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;content&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x6765;&#x4F20;&#xFF08;content &#x662F; 16&#x7248;&#x672C;&#x4E4B;&#x540E;&#x51FA;&#x73B0;&#x7684; &#xFF09;&#xFF0C;&#x6D41;&#x7A0B;&#x662F;&#x4E0B;&#x9762;&#x8FD9;&#x6837;:</p>
<p><img src="/posts/5921316d/content.png" alt=""></p>
<p>&#x800C;&#x4F7F;&#x7528;&#x6B65;&#x9AA4;&#x662F;&#xFF0C;&#x628A;&#x7956;&#x7236;&#x7EC4;&#x4EF6;&#x7528;<code>Provider</code> &#x5305;&#x88F9;&#x8D77;&#x6765;&#xFF0C;&#x628A;&#x5B59;&#x5B50;&#x7EC4;&#x4EF6;<code>Consumer</code> &#x5305;&#x88F9;&#x8D77;&#x6765;&#xFF0C;&#x5177;&#x4F53;&#x6B65;&#x9AA4;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>1 content &#x662F;react&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x5148;&#x5F15;&#x5165;, content.js&#xFF1A;</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&apos;react&apos;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> {Provider, Consumer} = React.createContext();</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> {</span><br><span class="line">  Provider, </span><br><span class="line">  Consumer</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>2 TodoWrap.js</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">_handledelete = <span class="function">(<span class="params">index</span>) =&gt;</span> {</span><br><span class="line">    <span class="keyword">const</span> list = [...this.state.list];</span><br><span class="line">    list.splice(index, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">this</span>.setState({</span><br><span class="line">      list</span><br><span class="line">    });</span><br><span class="line">  }; </span><br><span class="line"></span><br><span class="line">render() {</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Provider value={{ <span class="attr">_handledelete</span>: <span class="keyword">this</span>._handledelete }} &gt;    <span class="comment">//value&#x540D;&#x5B57;&#x662F;&#x56FA;&#x5B9A;&#x7684;</span></span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;input type=<span class="string">&quot;text&quot;</span> ref={<span class="keyword">this</span>.task} /&gt;</span><br><span class="line">          &lt;button onClick={<span class="keyword">this</span>._handleClick}&gt;&#x6DFB;&#x52A0;&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>div&gt;</span><br><span class="line">        &lt;Todolistcomp list={<span class="keyword">this</span>.state.list} fn={<span class="keyword">this</span>._handledelete}/&gt;</span><br><span class="line">      &lt;<span class="regexp">/Provider&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  }</span></span><br></pre></td></tr></tbody></table></figure>
<p>3 TodoItem.js, consumer&#x4E2D;&#x9700;&#x8981;&#x5199;&#x6210;&#x8FD9;&#x79CD;&#x7BAD;&#x5934;&#x51FD;&#x6570;&#x7684;&#x5F62;&#x5F0F;</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, { Component } <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> { Consumer } <span class="keyword">from</span> <span class="string">&quot;./content&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Todoitemcomp</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>{</span><br><span class="line">  _handledelete = <span class="function"><span class="params">index</span> =&gt;</span> {</span><br><span class="line">    <span class="keyword">this</span>.props._handledelete(index);</span><br><span class="line">  };</span><br><span class="line">  render() {</span><br><span class="line">    <span class="keyword">const</span> { task, index } = <span class="keyword">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Consumer&gt;</span><br><span class="line">        {({ _handledelete}) =&gt; (</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            {task}</span><br><span class="line">            &lt;button onClick={() =&gt; _handledelete(index)}&gt;X&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">          &lt;/</span>li&gt;</span><br><span class="line">        )}</span><br><span class="line">      &lt;<span class="regexp">/Consumer&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  }</span></span><br><span class="line"><span class="regexp">}</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Todoitemcomp;</span></span><br></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
    
  </div>
</article>

    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#state-、setState"><span class="post-toc-number">1.</span> <span class="post-toc-text">state 、setState</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#受控组件、非受控组件"><span class="post-toc-number">2.</span> <span class="post-toc-text">受控组件、非受控组件</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#属性校验"><span class="post-toc-number">3.</span> <span class="post-toc-text">属性校验</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#组件交互"><span class="post-toc-number">4.</span> <span class="post-toc-text">组件交互</span></a></li></ol>
        </nav>
    </aside>
   
    </div>
    <footer class="footer-nav">
      
  <span class="footer-msg">
    2018
    
    
    <span class="timeDivide">-</span>
    
    Orange~.&nbsp;
    Power by
    <a href="https://hexo.io/" target="_blank" rel="external nofollow">Hexo</a>
    and
    <a class="orangelink" href="https://github.com/" target="_blank" rel="">
      orange</a>
  </span>

    </footer>
    <div class="back-top" id="back-top">
      <i class="back-top-icon"></i>
    </div>
    
  
  <script src="/js/jquery/jquery-3.1.1.min.js"></script>

    <script src="/js/theme.js"></script>
    <script src="/js/index.js"></script>
  
  </div>
</body>